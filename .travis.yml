language: python
sudo: false
matrix:
  include:
  - name: Python 3.6
    dist: xenial
    python: 3.6
    env: GEN_DOC=yes

before_install:
  - pip3 install mkdocs-material
  - pip3 install --upgrade pip
  - pip3 install npm
  - pip3 install twine
  - pip3 install mkdocs-material

branches:
  only:
  - master
  - "v/^\\d+\\.\\d+(\\.\\d+)?(-\\S*)?$/"
cache:
  pip: true
git:
  depth: 3
  quiet: true
script:
  - make dist
  - .docs.sh

notifications:
  email:
    on_success: never
deploy:
  - provider: pypi
    user: comwes
    password: $PYPIPROD
    skip_existing: true
    on:
      tags: true
      branch: master
